import { Meta, Preview, Props, Story } from '@storybook/addon-docs';
import { StatusMessage } from '../src/StatusMessage';
import readMe from '../README.md';
import {A} from "@not-govuk/components";

<Meta
  title="Status message"
  component={ StatusMessage }
  parameters={ {
    chromatic: { viewports: [820, 480] },
    description: 'An indication to the user that something has changed.',
    jest: ['StatusMessage'],
    notes: readMe
  } }
/>

# Status message

Tell users that something has changed.

<Preview withToolbar>
  <Story name="StatusMessage">
    <StatusMessage status="On hold" />
  </Story>
</Preview>

<Props of={ StatusMessage } />

## When to use this component

Use status messages to:

  - notify the user of a change
  - tell the user something important
  - inform the user that they need to do something

They are like alerts but are primarily used for internal services and can include actions for users to take.
For less prominent status indicators you could use <A href="https://design-system.service.gov.uk/components/tag/">tags from the GOV.UK design system</A>.

Limit to important information, or when it’s changed. Overuse risks the message getting lost.

## How it works

### Standard status message with an action

<Preview>
  <Story name="Standard">
    <StatusMessage status="On hold" actions={[{ href: "#", text: "Review" }]}>
      Due for review 31 May 2021
    </StatusMessage>
  </Story>
</Preview>

### Status message without an action

<Preview>
	<Story name="Standard without action">
		<StatusMessage status="On hold">Due for review 31 May 2021</StatusMessage>
	</Story>
</Preview>

### Status message with multiple actions

<Preview>
  <Story name="MultipleActions">
    <StatusMessage status="On hold" actions={[
        { href: "#", text: "Review" },
        { href: "#", text: "Extend hold" },
      ]}>
      Due for review 31 May 2021
    </StatusMessage>
  </Story>
</Preview>

### Status message with multiple actions (no extra content)

<Preview>
  <Story name="MultipleActions no extra content">
    <StatusMessage
      status="On hold"
      actions={[
        { href: "#", text: "Review" },
        { href: "#", text: "Extend hold" },
      ]}>
    </StatusMessage>
  </Story>
</Preview>

## Writing for this component
The status message should be as concise as possible and relate to the whole page. The bold part and button should be short, 1 or 2 words.

Any buttons should be verbs.

If text in the middle is necessary, then ideally one line. It does not need to be in full sentences and does not need to end in a full stop. It should be plain text with no formatting.

Do not use links, they do not contrast well with the background, use buttons instead.

If it’s about people, make sure your content is dynamic and personalised. Use ‘person’ when it’s about one person and ‘people’ for more than one and include names if you can.

## Accessibility

All users benefit from clear, visible notification messages which are presented in a consistent, predictable way. See the <a href="/accessibility/notifications">notifications guidance</a> for more information

## Research

The status message is used by:

  - Returns and movement
  - Passport renewals
  - Passport application search
  - a service used by staff to assess risk at the border
  - an internal service to manage appointments

For a service to assess border risk, this was used at the top of the screen to:

- show who owns the case
- show if the case is read only
- allow users to take over the case

<Preview>
  <Story name="ExampleFromIntenalService">
    <StatusMessage
      status="Read only"
      actions={[{ href: "#", text: "Take over" }]}>
      Liam Davies is working on these results
      <br />
      Last active: 5 minutes ago
    </StatusMessage>
  </Story>
</Preview>

Research with 6 users showed that users understood the message and how to interact with it.

## Help improve this component

This component needs improving. We need evidence about:

- when to use an [alert](/components?name=Alert), [expandable banner](/components?name=Expandable%20banner) or status message

To contribute, add your thoughts and research findings to our [GitHub discussion](https://github.com/UKHomeOffice/design-system/discussions/419), or follow our [contribute guidance](/contribute).
